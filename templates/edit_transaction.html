<!-- templates/edit_transaction.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{% if transaction %}Edit{% else %}Add{% endif %} Transaction • Smart Assistant</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --blue-dark:#0A1931;
      --blue-primary:#1A3D63;
      --blue-secondary:#4A7FA7;
      --blue-light:#B3CFE5;
      --blue-bg:#F4F9FD;
    }

    body{
      background: linear-gradient(135deg,var(--blue-light),var(--blue-bg));
      padding:25px;
      font-family:"Segoe UI",sans-serif;
    }

    .cute-card{
      border-radius:18px;
      padding:22px;
      background:#ffffff;
      border:2px solid var(--blue-light);
      box-shadow:0 8px 22px rgba(26,61,99,0.25);
      max-width:520px;
      margin:auto;
    }

    h4{
      color:var(--blue-primary);
      margin-bottom:15px;
    }

    .btn-blue{
      background:linear-gradient(135deg,var(--blue-secondary),var(--blue-primary));
      color:white;
      border:none;
    }

    .btn-blue:hover{
      background:linear-gradient(135deg,var(--blue-primary),var(--blue-dark));
      color:white;
    }
  </style>
</head>

<body>

<a href="javascript:history.back()" class="btn btn-outline-primary mb-3">⬅ Back</a>


<div class="container">

  <div class="cute-card">

    <h4>{{ 'Edit' if transaction else 'Add' }} Transaction</h4>

    <form method="POST">

      <div class="mb-2">
        <select name="type" class="form-select">
          <option value="expense" {% if transaction and transaction['type']=='expense' %}selected{% endif %}>Expense</option>
          <option value="income" {% if transaction and transaction['type']=='income' %}selected{% endif %}>Income</option>
        </select>
      </div>

      <div class="mb-2">
        <input type="number" step="0.01" name="amount" class="form-control"
               placeholder="Amount"
               value="{{ transaction['amount'] if transaction else '' }}"
               required>
      </div>

      <div class="mb-2">
        <select name="category_id" class="form-select">
          <option value="">Uncategorized</option>
          {% for c in categories %}
          <option value="{{ c['id'] }}"
            {% if transaction and transaction['category_id']==c['id'] %}selected{% endif %}>
            {{ c['name'] }}
          </option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-2">
        <input type="date" name="date" class="form-control"
               value="{{ transaction['date'] if transaction else '' }}" required>
      </div>

      <div class="mb-2">
        <input type="text" name="payment_method" class="form-control"
               placeholder="Payment method"
               value="{{ transaction['payment_method'] if transaction else '' }}">
      </div>

      <div class="mb-2">
        <textarea name="description" class="form-control"
                  placeholder="Description">{{ transaction['description'] if transaction else '' }}</textarea>
      </div>

      <button class="btn btn-blue w-100">
        {{ 'Update' if transaction else 'Add' }}
      </button>

    </form>

  </div>
</div>

</body>
</html>
